(()=>{"use strict";var e="enabled",t="disabled",n="THEME",i=[{name:"banner_materia1",abbr:"materia1"}],a="ff-alt-",o="ff-testid-",r=function(e,t){var n;return void 0===e&&(e={}),void 0===t&&(t=0),null==(n=e.states)?void 0:n.find((e=>e.si===t))},s=function(e){var t,n;return void 0===e&&(e={}),(null==(t=e.activationConfig)?void 0:t.persistName)||(null==(n=e.activationConfig)?void 0:n.cookieName)},l=e=>{e.activationConfig||(e.activationConfig={}),e.activationConfig.hasLazyEnable=!1,e.activationConfig.enableType="cma"},d=e=>null!=e,g=e=>{var t,n,i=globalThis.localStorage.getItem(e);return d(i)||(t=e,i=(n=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([.$?*|{}()[]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(n[1]):void 0),i},v=(e,t)=>{globalThis.localStorage.setItem(e,t)},c=e=>e.states.find((t=>t.si===e.stateIndex)),u=function(e){var t;return void 0===e&&(e={}),(null==(t=e.activationConfig)?void 0:t.applyType)||n},f=n=>{var i=(n=>{var i=function(e){var t;return void 0===e&&(e={}),null==(t=e.activationConfig)?void 0:t.classFFBase}(n),a=[],o=[];i&&(a.push(i+"--"+(n.enabled?e:t)),o.push(i+"--"+(n.enabled?t:e)),a.push(i+"--st-"+n.stateIndex));var r=c(n)||{},s=(e=>e.states.filter((t=>t.si!==e.stateIndex)))(n);if(r.classes&&a.push(...r.classes),s&&(i&&s.forEach((e=>o.push(i+"--st-"+e.si))),r.isRemClasses)){var l=[...new Set(s.reduce(((e,t)=>[...e,...t.classes||[]]),[]))];l&&o.push(...l)}return{classesToAdd:a,classesToRem:o}})(n);i.classesToRem&&i.classesToRem.forEach((e=>{return t=e,document.documentElement.classList.remove(t);var t})),i.classesToAdd&&i.classesToAdd.forEach((e=>{return t=e,document.documentElement.classList.add(t);var t}))},h=e=>{e.state.applied=!0,e.promiseConfig.resolve(e.stateIndex)},b=e=>{!e.state.applied&&e.state.resolved&&(u(e)===n?f(e):"ASSET"===u(e)&&(e=>{var t=c(e);((null==t?void 0:t.assets)||[]).forEach((e=>{var t,n;null==(t=globalThis.cdaaas)||null==(n=t.helpers)||n.loadScript(e.url)}))})(e),h(e))},p="glb-ff-force",C="glbFeatFlagForce",m=function(e,t){void 0===t&&(t=0),r(e,t)&&(l(e),e.abConfig=void 0,e.trackingConfig=void 0,e.enabled=t>0,e.stateIndex=t,e.isForce=!0)},F=e=>""+C+e.toLowerCase(),I=e=>{var t=e?globalThis.localStorage.getItem(F(e)):void 0;return d(t)?parseInt(t,10):void 0},T=function(e,t){void 0===t&&(t=1),e&&globalThis.localStorage.setItem(F(e),t)},x=e=>{e&&globalThis.localStorage.removeItem(F(e))},A=()=>{var e=[];return Object.keys(globalThis.localStorage).forEach((t=>{t.includes(C)&&(e.push(t),globalThis.localStorage.removeItem(t))})),e},E=function(e){void 0===e&&(e=[]);var t=(()=>{var e=(()=>{var e,t,n=(void 0===t&&(t=globalThis.location.href),new URLSearchParams(new URL(t).search));if(n.has(p)){var i=n.get("glb-ff-state");e={ff:n.get(p),stateIndex:d(i)?parseInt(i,10):1,isPersist:n.has("glb-ff-force-persist"),isRemove:n.has("glb-ff-force-remove"),isRemoveAll:n.has("glb-ff-force-remove-all")}}return e})();return e&&(e.isRemoveAll?(A(),e=null):e.isRemove?(x(e.ff),e=null):e.isPersist&&(T(e.ff,e.stateIndex),e=null)),e})();e.forEach((e=>((e,t)=>{var n;n=t&&t.ff.toLowerCase()===e.id.toLowerCase()?t.stateIndex:I(e.id),Number.isInteger(n)&&m(e,n)})(e,t)))};function y(e,t,n,i,a,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},w.apply(this,arguments)}var P=e=>()=>{var t,n=new Function("return "+e);try{t=n()}catch(e){console.error(e)}return t},L=(e,t)=>{var n;return(null==e||null==(n=e.activationConfig)?void 0:n.enableType)===t},O=(e,t)=>L(e,"globoab")&&e.abConfig&&(!t||t===e.abConfig.experimentName),S=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=void 0),e.filter((e=>!e.disabled&&O(e,t)))},k=function(e){var t;return void 0===e&&(e={}),!(null==(t=e.activationConfig)||!t.hasLazyEnable)},B=function(e,t){var i,{isPreview:a=!1,dependsOnList:o=[]}=void 0===t?{}:t;return e&&e.name&&((e=>{e.activationConfig||(e.activationConfig={},l(e))})(i=w({},e)),i.state={},i.promiseConfig={},i.promiseConfig.promise=new Promise(((e,t)=>{i.promiseConfig.resolve=e,i.promiseConfig.reject=t})),i.actions={},i.actions.hasContent=()=>!0,i.actions.hasFeatFlagCondition=()=>!0,i.contentCondition&&(i.actions.hasContent=P(i.contentCondition)),i.ffCondition&&(i.actions.hasFeatFlagCondition=P(i.ffCondition)),i.activationConfig.initCondition&&(i.actions.checkOnInit=P(i.activationConfig.initCondition)),!i.actions.hasFeatFlagCondition()||function(e){return void 0===e&&(e=[]),e.length&&!e.find((e=>!e.disabled))}(o)?(i.disabled=!0,m(i,0)):a&&O(i)&&m(i,1),(e=>{var t,i=void 0===e.stateIndex?0:e.stateIndex;if(e.disabled)return i;if(function(e){return void 0===e&&(e={}),s(e)&&(O(e)||L(e,"runtime"))}(e)){var a=g(s(e));d(a)&&(i=Number(a)),e.enabled=i>0,e.stateIndex=i,e.state.resolved=!0}else O(e)&&!L(e,"cma")||(e.state.resolved=!0);if(null!=(t=e.actions)&&t.checkOnInit){var o,r=null==(o=e.actions)?void 0:o.checkOnInit();e.enabled=r>0,e.stateIndex=Number.isInteger(r)&&r>=0?r:0,e.state.resolved=!0}(e=>{!e.state.applied&&e.state.resolved&&u(e)===n&&(f(e),h(e))})(e)})(i)),i},G=(e,t,n)=>{var i=!1;return function(e){void 0===e&&(e={});var t=(e.abConfig||{}).experimentAppliedInfo||{};return t&&t.experiment&&t.alternative&&t.testId}(t)&&!1!==t.abConfig.events&&n&&n[e]&&(n[e](t.abConfig.experimentAppliedInfo),i=!0),i},R=(e,t,n)=>{if(e&&t){var i=e.experiment,l=S(t,i),c=(e=>({alternative:g(""+a+e),testId:g(""+o+e)}))(i);l.forEach((t=>{t.experiment=e;var i=((e,t)=>e.states.find((e=>e.ab===t)))(t,e.alternative),l=i.si,u=k(t);t.isFirstFeatFlagView=function(e){void 0===e&&(e={});var{hasLazyEnable:t}=e.activationConfig||{},n=s(e);return t&&!d(g(n))}(t);var f,h,p,C=(void 0===(h=l)&&(h=0),void 0===p&&(p=!1),(f=t).disabled||(f.stateIndex===h&&f.state.applied&&!p||k(f)&&!p||(f.enabled=!!h,f.stateIndex=h,f.state.resolved=!0,b(f)),((e,t)=>{var n=s(e);if(!function(e){var t;return void 0===e&&(e={}),!(null==(t=e.activationConfig)||!t.isReadOnly)}(e)){if(e.experiment){var{experiment:i,alternative:r,testId:l}=e.experiment;((e,t,n)=>{var i=""+o+e;v(""+a+e,t),v(i,n)})(i,r,l)}n&&v(n,t)}})(f,h)),f.stateIndex);if(t.abConfig.experimentAppliedInfo={experiment:e.experiment,alternative:r(t,C).ab,testId:u?c.testId:e.testId},t.abConfig.isImpressionFired=!1,!t.isFirstFeatFlagView&&n&&!1!==t.abConfig.events){var m=((e,t)=>G("impression",e,t))(t,n);t.abConfig.isImpressionFired=m,t.abConfig.sendConversion=()=>{var e=((e,t)=>G("conversion",e,t))(t,n);t.abConfig.isConversionFired=e},t.abConfig.conversionNeeded&&t.abConfig.sendConversion()}}))}},N=function(){var e,t=(e=function*(e,t,n){var i;try{i=yield n.choose(e),R(i,t,n)}catch(n){console.error(n),S(t,e).forEach((e=>{e.hasExperimentError=!0}))}return i},function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function r(e){y(o,i,a,r,s,"next",e)}function s(e){y(o,i,a,r,s,"throw",e)}r(void 0)}))});return function(e,n,i){return t.apply(this,arguments)}}();function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},j.apply(this,arguments)}const U=class{constructor(e,t){var n=this,{isPreview:i=!1}=void 0===e?{}:e;void 0===t&&(t=void 0),this.getFFConfig=e=>this.featureFlagList.find((t=>t.name===e)),this.addFeatureFlagsConfig=function(e){void 0===e&&(e=[]);var t=[];e.forEach((e=>{n.getFFConfig(e.name)||(e.dependsOn&&e.dependsOn.length?t.push(e):n.featureFlagList.push(B(e,n.options)))})),t.forEach((e=>{var t=e.dependsOn.map((e=>n.getFFConfig(e)));n.featureFlagList.push(B(e,j({},n.options,{dependsOnList:t})))}))},this.featureFlagList=[],this.started=!1,this.options={isPreview:i},t&&(this.featureFlagList=t.featureFlagList,this.options=j({},this.options,t.options),this.started=t.started)}getFeatureFlag(e){var t=this.getFFConfig(e);return t?t.promiseConfig.promise:Promise.reject(new Error("notFound"))}init(e){void 0===e&&(e={}),E(e.features),this.addFeatureFlagsConfig(e.features),this.started=!0,this.setupAdMetadataForPageTracking(),document.dispatchEvent(new CustomEvent("glb.featureFlag.init"))}getAdCustomAttrs(e){return function(e,t){var n;return void 0===t&&(t=[]),t.forEach((t=>{var{adPositions:a,adCustomAttrPrefix:o}=t.trackingConfig||{};if((a||[]).includes(e)&&t.state.resolved){var r=t.actions.hasContent(),s=(e=>{var t=i.find((t=>t.name===e));return t?t.abbr:e})(e),l="c"+(r?"1":"0")+"_f"+t.stateIndex+"_"+s;n||(n={}),n[o]=l}})),n}(e,this.featureFlagList)}convertAbFlag(e){var t=this.getFFConfig(e);t&&t.abConfig&&(t.abConfig.sendConversion?t.abConfig.sendConversion():t.abConfig.conversionNeeded=!0)}getFeatureFlagForAdPageTracking(){return this.featureFlagList.filter((e=>{var t;return(null==e||null==(t=e.trackingConfig)?void 0:t.hasTrackingForPage)&&!(null!=e&&e.disabled)}))}setupAdMetadataForPageTracking(){var e=this.getFeatureFlagForAdPageTracking();if(globalThis.cdaaas&&e.length){var t=e[0];globalThis.cdaaas.SETTINGS.AD_AB_TEST={enabled:t.enabled&&t.actions.hasContent()}}}};function _(e,t,n,i,a,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function D(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function r(e){_(o,i,a,r,s,"next",e)}function s(e){_(o,i,a,r,s,"throw",e)}r(void 0)}))}}globalThis.GloboFeatureFlagClient=class extends U{constructor(e,t){var{env:n="prod",useGWD:i=!0,isPreview:a=!1,globoABClient:o}=void 0===e?{}:e;void 0===t&&(t=void 0),super({isPreview:a},t),this.options.env=n,this.options.useGWD=i,this.logs=[],this.globoABClient=o||this.globoABClient}getForce(e){I(e)}saveForce(e,t){T(e,t)}removeForce(e){x(e)}removeAllForce(){A()}cLog(e){this.logs.push(e)}getGloboAbClient(){var e=this;return D((function*(){if(e.globoABClient)return e.globoABClient;try{e.options.useGWD&&(yield globalWebdeps("globo-ab")),e.globoABClient=new GloboAB(e.options.env),e.globoABClient.options().skipImpression().timeout(4e3)}catch(e){console.error(e)}return e.globoABClient}))()}updateFlagsGloboAB(){var e=this;return D((function*(){var t=S(e.featureFlagList);if(t.length){try{if(!(yield e.getGloboAbClient()))return}catch(t){console.error(t),e.cLog(t)}try{var n=function(e){void 0===e&&(e=[]);var t=e.map((e=>e.abConfig?e.abConfig.experimentName:null)).filter((e=>!!e));return[...new Set(t)]}(t),i=[];n.forEach((n=>{i.push(N(n,t,e.globoABClient))})),yield Promise.all(i)}catch(t){console.error(t),e.cLog(t)}}}))()}updateFlagsGeneral(){var e=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=void 0),e.filter((e=>!e.disabled&&!O(e,t)))}(this.featureFlagList);return e.length?(e.forEach((e=>{b(e)})),Promise.resolve()):Promise.resolve()}updateUnresolved(){var e=this;return D((function*(){return Promise.all([e.updateFlagsGloboAB(),e.updateFlagsGeneral()])}))()}updateFlags(){var e=this;return D((function*(){e.started?(yield e.updateUnresolved(),document.dispatchEvent(new CustomEvent("glb.featureFlag.updateFlags"))):e.cLog("[updateFlags] fail: client not started")}))()}};var W=!!globalThis.glbFeatFlagClient;globalThis.glbFeatFlagClient=new globalThis.GloboFeatureFlagClient(globalThis.glbFeatFlagConfig,globalThis.glbFeatFlagClient),!W&&globalThis.glbFeatFlagConfig&&globalThis.glbFeatFlagClient.init(globalThis.glbFeatFlagConfig),globalThis.glbFeatFlagClient.updateFlags()})();